<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Menu - Phương Nhung Healthy Bites</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Phương Nhung Healthy Bites - Menu</h1>
    </header>
    <nav>
        <a href="index.html">Trang chủ</a>
        <a href="menu.html">Menu</a>
        <a href="blog.html">Tin tức</a>
        <a href="contact.html">Liên hệ</a>
        <a href="admin.html">Admin</a>
    </nav>

    <section class="section menu-section">
        <div class="menu-header">
            <h2 id="menu-title">Menu Healthy Hôm Nay</h2>
            <div class="menu-meta">
                <div id="menu-datetime" class="datetime">--/--/---- --:--:--</div>
                <div id="qrcode" aria-hidden="true"></div>
            </div>
        </div>

        <div id="menu-list" role="main" aria-live="polite">
            <p>Đang tải menu...</p>
        </div>
    </section>

    <footer>
        <p>Phương Nhung Healthy Bites - 17 Phố Muối, Phường Tam Thanh, Lạng Sơn. Mở cửa: 10h-22h</p>
        <p>&copy; 2025 Phương Nhung Healthy Bites. All rights reserved.</p>
    </footer>

    <!-- Firebase (CDN) -->
    <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js"></script>

    <!-- QRCode library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    <script src="script.js"></script>
    <script>
        // Initialize menu page: live clock and QR
        (function() {
            // realtime clock
            function updateClock() {
                const el = document.getElementById('menu-datetime');
                if (!el) return;
                const d = new Date();
                const dd = String(d.getDate()).padStart(2,'0');
                const mm = String(d.getMonth()+1).padStart(2,'0');
                const yyyy = d.getFullYear();
                const hh = String(d.getHours()).padStart(2,'0');
                const min = String(d.getMinutes()).padStart(2,'0');
                const ss = String(d.getSeconds()).padStart(2,'0');
                el.textContent = `${dd}/${mm}/${yyyy} - ${hh}:${min}:${ss}`;
            }
            updateClock();
            setInterval(updateClock, 1000);

            // generate QR for this page (absolute URL)
            const qEl = document.getElementById('qrcode');
            if (qEl) {
                // build URL to menu page
                const url = window.location.href.split('#')[0];
                // clear old
                qEl.innerHTML = '';
                new QRCode(qEl, {
                    text: url,
                    width: 140,
                    height: 140,
                    correctLevel: QRCode.CorrectLevel.H
                });
            }

            // ask script.js to attach firebase listener for menu
            if (typeof attachMenuRealtime === 'function') {
                attachMenuRealtime();
            } else {
                // fallback to load from localStorage if no firebase available
                if (typeof loadTodayMenu === 'function') loadTodayMenu();
            }
        })();
    </script>
</body>
</html>
