<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Qu·∫£n tr·ªã ‚Äî Phuong Nhung Healthy Food</title>
  <meta name="description" content="Trang qu·∫£n tr·ªã Phuong Nhung Healthy Food - qu·∫£n l√Ω th·ª±c ƒë∆°n v√† blog.">
  <link rel="stylesheet" href="styles.css">
  <!-- Firebase CDN (compat) -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
  <script src="firebase-config.js"></script>
  <script src="firebase-api.js"></script>
</head>
<body>
  <div class="site-wrap">
    <header class="header">
      <div class="header-inner">
        <a class="brand" href="index.html"><div class="logo">PN</div><div class="text">Phuong Nhung <span class="accent">Healthy</span> Food</div></a>
        <nav class="nav">
          <a href="index.html">Trang ch·ªß</a>
          <a href="menu.html">Th·ª±c ƒë∆°n</a>
          <a href="blog.html">Blog</a>
          <a href="contact.html">Li√™n h·ªá</a>
          <a href="admin.html" class="active">Qu·∫£n tr·ªã</a>
        </nav>
      </div>
    </header>

    <main class="content container">
      <div id="admin-locked" class="card">
        <h2>Trang qu·∫£n tr·ªã</h2>
        <p class="text-muted">Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ ti·∫øp t·ª•c.</p>
      </div>

      <div id="admin-layout" class="card" style="display:none">
        <h1>Trang qu·∫£n tr·ªã</h1>

        <!-- IMPORT BUTTON (top) -->
        <div style="display:flex;gap:12px;align-items:center;margin-bottom:12px;">
          <button id="import-defaults" class="btn">üì• Import 66 m√≥n m·∫∑c ƒë·ªãnh</button>
          <div id="import-status" style="font-weight:600;color:#174D2F"></div>
        </div>

        <div class="admin-grid" style="margin-top:12px">
          <div>
            <div class="section-title"><h2>Qu·∫£n l√Ω M√≥n (Accordion)</h2></div>
            <div style="margin-bottom:8px;"><input id="search-dish" class="input" placeholder="T√¨m m√≥n..."></div>
            <div id="dish-list" style="margin-bottom:12px"></div>

            <div class="card" style="margin-top:10px">
              <h3>‚ûï Th√™m m√≥n m·ªõi</h3>
              <form id="add-dish-form">
                <div class="form-row">
                  <input id="dish-name" class="input" placeholder="T√™n m√≥n" required>
                  <select id="dish-group" class="input">
                    <option>G√†</option><option>B√≤</option><option>C√°</option><option>L·ª£n</option><option>Rau</option><option>ƒê·∫≠u</option><option>Tr·ª©ng</option><option>C∆°m</option><option>Chay</option><option>Kh√°c</option>
                  </select>
                </div>
                <div style="margin-top:8px">
                  <input id="dish-img" class="input file" type="file" accept="image/*">
                </div>
                <div style="margin-top:8px"><button class="btn" type="submit">Th√™m m√≥n</button></div>
              </form>
            </div>
          </div>

          <div>
            <div class="card">
              <h3>üç± M√≥n h√¥m nay (Danh s√°ch)</h3>
              <ol id="today-dishes" style="padding-left:18px"></ol>
              <div style="display:flex;gap:8px;margin-top:12px">
                <button id="save-menu" class="btn">üíæ L∆∞u Menu H√¥m Nay</button>
                <button id="reset-selection" class="btn secondary">B·ªè ch·ªçn t·∫•t c·∫£</button>
              </div>
            </div>

            <div class="card" style="margin-top:12px">
              <h3>üìù Qu·∫£n tr·ªã Blog</h3>
              <form id="add-post-form">
                <div style="margin-bottom:8px"><input id="post-title" class="input" placeholder="Ti√™u ƒë·ªÅ" required></div>
                <div style="margin-bottom:8px"><textarea id="post-content" class="input" rows="4" placeholder="N·ªôi dung" required></textarea></div>
                <div style="margin-bottom:8px"><input id="post-img" class="input file" type="file" accept="image/*"></div>
                <div><button class="btn" type="submit">ƒêƒÉng b√†i</button></div>
              </form>
              <h4 style="margin-top:12px">B√†i vi·∫øt g·∫ßn ƒë√¢y</h4>
              <div id="admin-posts" style="margin-top:8px"></div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        <div><strong>Phuong Nhung Healthy Food</strong><br><small class="text-muted">¬© 2025</small></div>
        <div>Gi·ªù m·ªü c·ª≠a: 10:00 - 19:30 ‚Ä¢ <a href="tel:+84902032188">0902.032.188</a></div>
      </div>
    </footer>
  </div>

  <script>
    // prompt then show admin layout (unchanged)
    document.addEventListener('DOMContentLoaded', ()=>{
      const pwd = prompt('Nh·∫≠p m·∫≠t kh·∫©u qu·∫£n tr·ªã:');
      if(pwd === '123'){
        document.getElementById('admin-locked').style.display='none';
        document.getElementById('admin-layout').style.display='block';
        // small delay to ensure firebase-init loaded
        setTimeout(()=>{ if(window.initAdminPage) initAdminPage(); if(window.setupImportButton) setupImportButton(); }, 250);
      } else { alert('Sai m·∫≠t kh·∫©u'); location.href='index.html'; }
    });
  </script>

  <script src="script.js"></script>
</body>
</html>
